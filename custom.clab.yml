name: frr3
topology:
  nodes:
    ra:
      kind: linux
      image: ghcr.io/gckopper/redes-2-custom-router:latest
      binds:
        - ./cfg/custom/ra/init.sh:/init.sh
    rb:
      kind: linux
      image: ghcr.io/gckopper/redes-2-custom-router:latest
      binds:
        - ./cfg/custom/rb/init.sh:/init.sh
    rc:
      kind: linux
      image: ghcr.io/gckopper/redes-2-custom-router:latest
      binds:
        - ./cfg/custom/rc/init.sh:/init.sh
    h1:
      kind: linux
      image: ghcr.io/hellt/network-multitool:latest
    h2:
      kind: linux
      image: ghcr.io/hellt/network-multitool:latest
    h3:
      kind: linux
      image: ghcr.io/hellt/network-multitool:latest
    h4:
      kind: linux
      image: ghcr.io/hellt/network-multitool:latest
  links:
    # Router mesh
    - endpoints: ["ra:eth1","rb:eth1"]
    - endpoints: ["ra:eth2","rc:eth1"]
    - endpoints: ["rb:eth2","rc:eth2"]
    # Hosts
    - endpoints: ["h1:eth1","ra:eth3"]
    - endpoints: ["h2:eth1","ra:eth4"]
    - endpoints: ["h3:eth1","rb:eth3"]
    - endpoints: ["h4:eth1","rc:eth3"]
